<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ברוך הבא</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="welcome-container">
        <h1 id="welcome-message"></h1>
        <button id="roles-button">התפקידים שלך</button>
        <button id="identify-button" style="display: none;">לחץ לזהות מחבלים</button>
        <p id="terrorist-count"></p>
        <button id="logout-button">יציאה מהאתר</button>
    </div>
    <div id="rank" class="rank-container"></div>
    <script>
        // Get the username and rank from the URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const username = urlParams.get('username');
        const rank = urlParams.get('rank');

        // Display the welcome message
        document.getElementById('welcome-message').textContent = `מה תרצה לעשות היום, ${username}?`;
        document.getElementById('rank').textContent = `התפקיד שלך: ${rank}`;

        // Show the identify button for Noa and Elad
        if (username === 'נועה' || username === 'אלעד') {
            document.getElementById('identify-button').style.display = 'block';
        }

        // Identify terrorists button click event
        let lastClickTime = 0;
        document.getElementById('identify-button').addEventListener('click', function() {
            const currentTime = Date.now();
            const timeSinceLastClick = currentTime - lastClickTime;
            const cooldownTime = 2 * 60 * 1000; // 2 minutes in milliseconds

            if (timeSinceLastClick < cooldownTime) {
                const timeLeft = Math.ceil((cooldownTime - timeSinceLastClick) / 1000);
                document.getElementById('terrorist-count').textContent = `עליך להמתין עוד ${timeLeft} שניות.`;
                return;
            }

            lastClickTime = currentTime;
            const terroristCount = Math.random() < 0.5 ? 0 : Math.floor(Math.random() * 21);
            const message = terroristCount === 0 ? 'לא זוהו מחבלים' : `מספר המחבלים: ${terroristCount}`;
            document.getElementById('terrorist-count').textContent = message;
        });

        // Roles button click event
        document.getElementById('roles-button').addEventListener('click', function() {
            window.location.href = `roles.html?username=${username}`;
        });

        // Logout button click event
        document.getElementById('logout-button').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>